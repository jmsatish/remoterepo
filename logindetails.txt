pipeline{
 agent {label 'master'}
 stages {
 stage('Connecting to Sql server and listing the Logins') 
    {
     steps{
           $SqlServer = "localhost"
$SqlDBName = "AdventureWorks2016"
 
Add-Type -Path "C:\Program Files\Microsoft SQL Server\130\SDK\Assemblies\Microsoft.SqlServer.Smo.dll"
 
$SqlServer = New-Object Microsoft.SqlServer.Management.Smo.Server($SqlServer)
 
# get all of the current logins and their types
$SqlServer.Logins |
    Select-Object Name, LoginType, Parent
          }
    }
 stage('result')
    {
     steps{
          echo "success"
          }
    }      
}
}

